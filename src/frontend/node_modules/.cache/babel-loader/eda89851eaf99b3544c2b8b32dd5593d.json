{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString } from \"vue\";\n\nvar _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Reset password\", -1\n/* HOISTED */\n);\n\nvar _hoisted_2 = {\n  \"ng-if\": \"!result\"\n};\n\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \" New Password\", -1\n/* HOISTED */\n);\n\nvar _hoisted_4 = {\n  class: \"toggle-password\"\n};\n\nvar _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password2\"\n}, \" Confirm Password\", -1\n/* HOISTED */\n);\n\nvar _hoisted_6 = {\n  class: \"toggle-password\"\n};\nvar _hoisted_7 = {\n  key: 0\n};\nvar _hoisted_8 = [\"aria-busy\"];\nvar _hoisted_9 = {\n  key: 0\n};\nvar _hoisted_10 = {\n  key: 1,\n  class: \"invalid\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_the_button_toggle_hidden = _resolveComponent(\"the-button-toggle-hidden\");\n\n  return _openBlock(), _createElementBlock(\"article\", null, [_hoisted_1, _createElementVNode(\"form\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [$data.showPassword ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 0,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.password = $event;\n    }),\n    type: \"text\",\n    name: \"password\",\n    id: \"password\"\n  }, null, 512\n  /* NEED_PATCH */\n  )), [[_vModelText, $data.password]]) : _createCommentVNode(\"v-if\", true), !$data.showPassword ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 1,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.password = $event;\n    }),\n    type: \"password\",\n    name: \"password\",\n    id: \"password\"\n  }, null, 512\n  /* NEED_PATCH */\n  )), [[_vModelText, $data.password]]) : _createCommentVNode(\"v-if\", true), _createVNode(_component_the_button_toggle_hidden, {\n    class: \"togglePasswordMask\",\n    onShowPassword: _cache[2] || (_cache[2] = function ($event) {\n      return $data.showPassword = !$data.showPassword;\n    })\n  })]), _hoisted_5, _createElementVNode(\"div\", _hoisted_6, [$data.showPassword2 ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 0,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $data.password2 = $event;\n    }),\n    type: \"text\",\n    name: \"password2\",\n    id: \"password2\"\n  }, null, 512\n  /* NEED_PATCH */\n  )), [[_vModelText, $data.password2]]) : _createCommentVNode(\"v-if\", true), !$data.showPassword2 ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 1,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n      return $data.password2 = $event;\n    }),\n    type: \"password\",\n    name: \"password\",\n    id: \"password2\"\n  }, null, 512\n  /* NEED_PATCH */\n  )), [[_vModelText, $data.password2]]) : _createCommentVNode(\"v-if\", true), _createVNode(_component_the_button_toggle_hidden, {\n    class: \"togglePasswordMask\",\n    onShowPassword: _cache[5] || (_cache[5] = function ($event) {\n      return $data.showPassword2 = !$data.showPassword2;\n    })\n  })]), $data.dataInvalid ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    type: \"submit\",\n    id: \"reset\",\n    \"aria-busy\": $data.buttonDisabled,\n    onClick: _cache[6] || (_cache[6] = _withModifiers(function ($event) {\n      return $options.submitForm();\n    }, [\"prevent\"]))\n  }, [!$data.buttonDisabled ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \"Reset Password\")) : _createCommentVNode(\"v-if\", true)], 8\n  /* PROPS */\n  , _hoisted_8), $data.result ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString($data.result), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"mappings":";;8BAEIA,oBAAuB,IAAvB,EAAuB,IAAvB,EAAI,gBAAJ,EAAkB;AAAA;AAAlB;;;AACM,WAAM;;;8BACVA,oBAA2C,OAA3C,EAA2C;AAApCC,KAAG,EAAC;AAAgC,CAA3C,EAAsB,eAAtB,EAAmC;AAAA;AAAnC;;;AACKC,OAAK,EAAC;;;8BAoBXF,oBAAgD,OAAhD,EAAgD;AAAzCC,KAAG,EAAC;AAAqC,CAAhD,EAAuB,mBAAvB,EAAwC;AAAA;AAAxC;;;AACKC,OAAK,EAAC;;;;;;;;;;;AA6BMA,OAAK,EAAC;;;;;uBAtD3BC,oBAwDU,SAxDV,EAwDU,IAxDV,EAwDU,CAvDRC,UAuDQ,EAtDRJ,oBAqDO,MArDP,cAqDO,CApDLK,UAoDK,EAnDLL,oBAmBM,KAnBN,cAmBM,CAjBIM,oDADRH,oBAME,OANF,EAME;UAAA;;aAJSG,iBAAQC;MAIjB;AAHAC,QAAI,EAAC,MAGL;AAFAC,QAAI,EAAC,UAEL;AADAC,MAAE,EAAC;AACH,GANF;;AAAA,qBAEWJ,qDAgBP,GAVKA,oDADTH,oBAME,OANF,EAME;UAAA;;aAJSG,iBAAQC;MAIjB;AAHAC,QAAI,EAAC,UAGL;AAFAC,QAAI,EAAC,UAEL;AADAC,MAAE,EAAC;AACH,GANF;;AAAA,qBAEWJ,qDASP,EAJJK,aAG4BC,mCAH5B,EAG4B;AAF1BV,SAAK,EAAC,oBAEoB;AADzBW,kBAAa;AAAA,aAAEP,qBAAY,CAAIA,kBAAlB;AAAA;AACY,GAH5B,CAII,CAnBN,CAmDK,EA/BLQ,UA+BK,EA9BLd,oBAmBM,KAnBN,cAmBM,CAjBIM,qDADRH,oBAME,OANF,EAME;UAAA;;aAJSG,kBAASC;MAIlB;AAHAC,QAAI,EAAC,MAGL;AAFAC,QAAI,EAAC,WAEL;AADAC,MAAE,EAAC;AACH,GANF;;AAAA,qBAEWJ,sDAgBP,GAVKA,qDADTH,oBAME,OANF,EAME;UAAA;;aAJSG,kBAASC;MAIlB;AAHAC,QAAI,EAAC,UAGL;AAFAC,QAAI,EAAC,UAEL;AADAC,MAAE,EAAC;AACH,GANF;;AAAA,qBAEWJ,sDASP,EAJJK,aAG4BC,mCAH5B,EAG4B;AAF1BV,SAAK,EAAC,oBAEoB;AADzBW,kBAAa;AAAA,aAAEP,sBAAa,CAAIA,mBAAnB;AAAA;AACY,GAH5B,CAII,CAnBN,CA8BK,EAVMA,mCAAXH,oBAA8B,KAA9B,EAA8BY,UAA9B,sCAUK,EATLf,oBAOS,QAPT,EAOS;AANPQ,QAAI,EAAC,QAME;AALPE,MAAE,EAAC,OAKI;AAJN,iBAAWJ,oBAIL;AAHNU,WAAK;AAAA,aAAUC,qBAAV;AAAA,OAAoB,WAApB;AAGC,GAPT,IAMeX,sCAAbH,oBAAkD,MAAlD,EAAkDe,UAAlD,EAA6B,gBAA7B,uCANF;;AAAA,eASK,EADIZ,8BAATH,oBAAiD,GAAjD,eAAiDgB,iBAAbb,YAAa,CAAjD,EAA0C;AAAA;AAA1C,wCACK,CArDP,CAsDQ,CAxDV","names":["_createElementVNode","for","class","_createElementBlock","_hoisted_1","_hoisted_3","$data","$event","type","name","id","_createVNode","_component_the_button_toggle_hidden","onShowPassword","_hoisted_5","_hoisted_7","onClick","$options","_hoisted_9","_toDisplayString"],"sourceRoot":"","sources":["/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/src/pages/reset-password.vue"],"sourcesContent":["<template>\n  <article>\n    <h1>Reset password</h1>\n    <form ng-if=\"!result\">\n      <label for=\"password\"> New Password</label>\n      <div class=\"toggle-password\">\n        <input\n          v-if=\"showPassword\"\n          v-model=\"password\"\n          type=\"text\"\n          name=\"password\"\n          id=\"password\"\n        />\n        <input\n          v-if=\"!showPassword\"\n          v-model=\"password\"\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n        />\n        <the-button-toggle-hidden\n          class=\"togglePasswordMask\"\n          @show-password=\"showPassword = !showPassword\"\n        ></the-button-toggle-hidden>\n      </div>\n      <label for=\"password2\"> Confirm Password</label>\n      <div class=\"toggle-password\">\n        <input\n          v-if=\"showPassword2\"\n          v-model=\"password2\"\n          type=\"text\"\n          name=\"password2\"\n          id=\"password2\"\n        />\n        <input\n          v-if=\"!showPassword2\"\n          v-model=\"password2\"\n          type=\"password\"\n          name=\"password\"\n          id=\"password2\"\n        />\n        <the-button-toggle-hidden\n          class=\"togglePasswordMask\"\n          @show-password=\"showPassword2 = !showPassword2\"\n        ></the-button-toggle-hidden>\n      </div>\n      <div v-if=\"dataInvalid\"></div>\n      <button\n        type=\"submit\"\n        id=\"reset\"\n        :aria-busy=\"buttonDisabled\"\n        @click.prevent=\"submitForm()\"\n      >\n        <span v-if=\"!buttonDisabled\">Reset Password</span>\n      </button>\n      <p v-if=\"result\" class=\"invalid\">{{ result }}</p>\n    </form>\n  </article>\n</template>\n\n<script>\nimport TheButtonToggleHidden from '@/components/ui/TheButtonToggleHidden.vue';\n\nexport default {\n  name: 'PasswordReset',\n  components: {\n    TheButtonToggleHidden,\n  },\n  data() {\n    return {\n      password: null,\n      passwordInvalid: null,\n      showPassword: false,\n      password2: null,\n      passwordInvalid2: null,\n      showPassword2: false,\n      buttonDisabled: false,\n      dataInvalid: null,\n      result: null,\n      message: null,\n    };\n  },\n  methods: {\n    resetForm() {\n      this.passwordInvalid = null;\n      this.passwordInvalid2 = null;\n      this.dataInvalid = false;\n      this.success = null;\n      this.result = null;\n    },\n    checkForm() {\n      let passed = true;\n      if (this.password === '') {\n        this.passwordInvalid = true;\n        this.message += 'Password may not be empty';\n        passed = false;\n      }\n      if (this.password2 === '') {\n        this.passwordInvalid = true;\n        this.message += this.message && this.message.length ? ', ' : '';\n        this.message += 'Password confirmation may not be empty';\n        passed = false;\n      }\n      if (this.password !== this.password2) {\n        this.dataInvalid = true;\n        this.message += this.message && this.message.length ? ', ' : '';\n        this.message = 'Confirmation password does not match';\n        passed = false;\n      }\n      return passed;\n    },\n    async submitForm() {\n      const { token } = this.$route.query;\n      if (this.checkForm() === true) {\n        this.buttonDisabled = true;\n        this.$http({\n          method: 'POST',\n          url: '/auth/reset-password',\n          data: {\n            token,\n            password: this.password,\n          },\n        })\n          .then(() => {\n            this.result = 'You have successfully changed your password.';\n          })\n\n          .catch((error) => {\n            this.dataInvalid = true;\n            this.$store.dispatch('setError', error);\n          })\n          .finally(() => {\n            this.buttonDisabled = false;\n          });\n      }\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}