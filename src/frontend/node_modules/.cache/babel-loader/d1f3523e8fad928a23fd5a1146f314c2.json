{"ast":null,"code":"import store from '@/store/index';\nimport localStorageService from '@/services/localStorageService';\nexport function getAccessTokenExpires() {\n  let {\n    accessTokenExpires\n  } = store.getters;\n\n  if (!accessTokenExpires) {\n    accessTokenExpires = localStorageService.get('accessTokenExpires');\n\n    if (accessTokenExpires) {\n      store.dispatch('accessTokenExpires', accessTokenExpires);\n    }\n  }\n\n  return accessTokenExpires;\n}\nexport function getAccessTokenValue() {\n  let {\n    accessTokenValue\n  } = store.getters;\n\n  if (!accessTokenValue) {\n    accessTokenValue = localStorageService.get('accessTokenValue');\n\n    if (accessTokenValue) {\n      store.dispatch('accessTokenValue', accessTokenValue);\n    }\n  }\n\n  return accessTokenValue;\n}\nexport function getRefreshTokenExpires() {\n  let {\n    refreshTokenExpires\n  } = store.getters;\n\n  if (!refreshTokenExpires) {\n    refreshTokenExpires = localStorageService.get('refreshTokenExpires');\n\n    if (refreshTokenExpires) {\n      store.dispatch('refreshTokenExpires', refreshTokenExpires);\n    }\n  }\n\n  return refreshTokenExpires;\n}\nexport function getRefreshTokenValue() {\n  let {\n    refreshTokenValue\n  } = store.getters;\n\n  if (!refreshTokenValue) {\n    refreshTokenValue = localStorageService.get('refreshTokenValue');\n\n    if (refreshTokenValue) {\n      store.dispatch('refreshTokenValue', refreshTokenValue);\n    }\n  }\n\n  return refreshTokenValue;\n}\nexport function setTokensInVuex(val) {\n  if (val?.access?.token) {\n    store.dispatch('accessTokenValue', val.access.token);\n    store.dispatch('accessTokenExpires', val.access.expires);\n    store.dispatch('refreshTokenValue', val.refresh.token);\n    store.dispatch('refreshTokenExpires', val.refresh.expires);\n  }\n}\nexport function setTokensInLocalStorage(val) {\n  if (val?.access?.token) {\n    // console.log('setting expires in local storage', val.access.expires);\n    localStorageService.set('accessTokenValue', val.access.token);\n    localStorageService.set('accessTokenExpires', val.access.expires);\n    localStorageService.set('refreshTokenValue', val.refresh.token);\n    localStorageService.set('refreshTokenExpires', val.refresh.expires);\n  }\n}\nexport function convertStringDatesToMS(serverResult) {\n  if (serverResult?.data?.tokens) {\n    const result = JSON.parse(JSON.stringify(serverResult));\n    result.data.tokens.access.expires = Date.parse(result.data.tokens.access.expires);\n    result.data.tokens.refresh.expires = Date.parse(result.data.tokens.refresh.expires);\n    return result;\n  }\n\n  return {};\n}","map":{"version":3,"sources":["/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/src/services/tokenService.js"],"names":["store","localStorageService","getAccessTokenExpires","accessTokenExpires","getters","get","dispatch","getAccessTokenValue","accessTokenValue","getRefreshTokenExpires","refreshTokenExpires","getRefreshTokenValue","refreshTokenValue","setTokensInVuex","val","access","token","expires","refresh","setTokensInLocalStorage","set","convertStringDatesToMS","serverResult","data","tokens","result","JSON","parse","stringify","Date"],"mappings":"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","sourcesContent":["import store from '@/store/index';\nimport localStorageService from '@/services/localStorageService';\n\nexport function getAccessTokenExpires() {\n  let { accessTokenExpires } = store.getters;\n  if (!accessTokenExpires) {\n    accessTokenExpires = localStorageService.get('accessTokenExpires');\n    if (accessTokenExpires) {\n      store.dispatch('accessTokenExpires', accessTokenExpires);\n    }\n  }\n  return accessTokenExpires;\n}\n\nexport function getAccessTokenValue() {\n  let { accessTokenValue } = store.getters;\n  if (!accessTokenValue) {\n    accessTokenValue = localStorageService.get('accessTokenValue');\n    if (accessTokenValue) {\n      store.dispatch('accessTokenValue', accessTokenValue);\n    }\n  }\n  return accessTokenValue;\n}\n\nexport function getRefreshTokenExpires() {\n  let { refreshTokenExpires } = store.getters;\n  if (!refreshTokenExpires) {\n    refreshTokenExpires = localStorageService.get('refreshTokenExpires');\n    if (refreshTokenExpires) {\n      store.dispatch('refreshTokenExpires', refreshTokenExpires);\n    }\n  }\n  return refreshTokenExpires;\n}\n\nexport function getRefreshTokenValue() {\n  let { refreshTokenValue } = store.getters;\n  if (!refreshTokenValue) {\n    refreshTokenValue = localStorageService.get('refreshTokenValue');\n    if (refreshTokenValue) {\n      store.dispatch('refreshTokenValue', refreshTokenValue);\n    }\n  }\n  return refreshTokenValue;\n}\n\nexport function setTokensInVuex(val) {\n  if (val?.access?.token) {\n    store.dispatch('accessTokenValue', val.access.token);\n    store.dispatch('accessTokenExpires', val.access.expires);\n    store.dispatch('refreshTokenValue', val.refresh.token);\n    store.dispatch('refreshTokenExpires', val.refresh.expires);\n  }\n}\n\nexport function setTokensInLocalStorage(val) {\n  if (val?.access?.token) {\n    // console.log('setting expires in local storage', val.access.expires);\n    localStorageService.set('accessTokenValue', val.access.token);\n    localStorageService.set('accessTokenExpires', val.access.expires);\n    localStorageService.set('refreshTokenValue', val.refresh.token);\n    localStorageService.set('refreshTokenExpires', val.refresh.expires);\n  }\n}\n\nexport function convertStringDatesToMS(serverResult) {\n  if (serverResult?.data?.tokens) {\n    const result = JSON.parse(JSON.stringify(serverResult));\n    result.data.tokens.access.expires = Date.parse(result.data.tokens.access.expires);\n    result.data.tokens.refresh.expires = Date.parse(result.data.tokens.refresh.expires);\n    return result;\n  }\n  return {};\n}\n"]},"metadata":{},"sourceType":"module"}