{"ast":null,"code":"import _asyncToGenerator from \"/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport CardNotification from '@/components/ui/CardNotification.vue';\nexport default {\n  name: 'CreateCategoryPage',\n  components: {\n    CardNotification: CardNotification\n  },\n  data: function data() {\n    return {\n      title: null,\n      desc: null,\n      parentSlug: null,\n      categories: [],\n      buttonDisabled: null,\n      errorMessage: '',\n      success: false,\n      result: null,\n      chrs: 0\n    };\n  },\n  computed: {\n    slug: function slug() {\n      if (!this.title) {\n        return '';\n      }\n\n      var str = this.title.replace(/\\s/g, '-');\n      str = str.toLowerCase();\n      return encodeURIComponent(str);\n    }\n  },\n  mounted: function mounted() {\n    this.parentSlug = this.$route.params.slug;\n  },\n  params: {\n    slug: String\n  },\n  methods: {\n    resetFormErrors: function resetFormErrors() {\n      this.success = null;\n      this.result = null;\n      this.errorMessage = '';\n    },\n    checkForm: function checkForm() {\n      this.resetFormErrors();\n      var passed = true;\n\n      if (!this.title) {\n        this.titleInvalid = true;\n        this.errorMessage = 'Please enter a title.';\n        passed = false;\n      } else if (!this.slug) {\n        this.slugInvalid = true;\n        this.errorMessage = 'Please enter a slug.';\n        passed = false;\n      } else if (!this.parentSlug) {\n        this.parentIdInvalid = true;\n        this.errorMessage = 'Please eselect a parent category.';\n        passed = false;\n      }\n\n      return passed;\n    },\n    submitForm: function submitForm() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.resetFormErrors();\n\n                if (_this.checkForm() === true) {\n                  _this.buttonDisabled = true;\n\n                  _this.$http({\n                    method: 'POST',\n                    url: '/categories',\n                    data: {\n                      title: _this.title,\n                      slug: _this.slug,\n                      desc: _this.desc,\n                      parentSlug: _this.parentSlug\n                    }\n                  }).then(function (result) {\n                    if (result.data) {\n                      _this.success = true;\n                      _this.result = result.data;\n                    }\n                  }).catch(function (error) {\n                    _this.$store.dispatch('setError', error);\n                  }).finally(function () {\n                    _this.buttonDisabled = false;\n                  });\n                } else {\n                  _this.$store.dispatch('setError', {\n                    message: _this.errorMessage\n                  });\n                }\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["CardNotification","name","components","data","title","desc","parentSlug","categories","buttonDisabled","errorMessage","success","result","chrs","computed","slug","str","replace","toLowerCase","encodeURIComponent","mounted","$route","params","String","methods","resetFormErrors","checkForm","passed","titleInvalid","slugInvalid","parentIdInvalid","submitForm","$http","method","url","then","catch","error","$store","dispatch","finally","message"],"sourceRoot":"","sources":["/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/src/pages/categories/index.vue"],"sourcesContent":["<template>\n  <article>\n    <h1 v-if=\"!success\">Create category</h1>\n    <h1 v-else>Category created</h1>\n    <form v-if=\"!success\">\n      <label for=\"title\">Title</label>\n      <input\n        v-model=\"title\"\n        type=\"text\"\n        name=\"title\"\n        id=\"title\"\n      />\n      <label for=\"slug\">Slug</label>\n      <input\n        readonly\n        v-model=\"slug\"\n        type=\"text\"\n        name=\"slug\"\n        id=\"slug\"\n      />\n      <input type=\"text\" v-model=\"parentSlug\" name=\"parentSlug\" iD=\"parentSlug\"/>\n      <!--\n      <label for=\"parentSlug\">Parent</label>\n        <select v-model=\"parentSlug\" id=\"parentSlug>\" name=\"parentSlug\">\n            <option disabled value=\"\">Please select one</option>\n            <option value=\"0\">0</option>\n            <option v-for=\"category in categories\" :key=\"category.slug\">{{category.title}}</option>\n        </select>\n      -->\n        <label for=\"desc\">Description</label>\n      <textarea id=\"desc\" rows=\"10\" cols=\"70\"></textarea>\n      <button\n        type=\"submit\"\n        id=\"Login\"\n        :aria-busy=\"buttonDisabled\"\n        @click.prevent=\"submitForm()\"\n      >\n        <span v-if=\"!buttonDisabled\">Create Category</span>\n      </button>\n    </form>\n    <card-notification v-else success-message=\"Congradulations! Please check\n    your email to verify your email address\"></card-notification>\n  </article>\n</template>\n\n<script>\nimport CardNotification from '@/components/ui/CardNotification.vue';\n\nexport default {\n  name: 'CreateCategoryPage',\n  components: {\n    CardNotification,\n  },\n  data() {\n    return {\n      title: null,\n      desc: null,\n      parentSlug: null,\n      categories: [],\n      buttonDisabled: null,\n      errorMessage: '',\n      success: false,\n      result: null,\n      chrs: 0,\n    };\n  },\n  computed: {\n    slug() {\n      if (!this.title) {\n        return '';\n      }\n      let str = this.title.replace(/\\s/g, '-');\n      str = str.toLowerCase();\n      return encodeURIComponent(str);\n    },\n  },\n  mounted() {\n    this.parentSlug = this.$route.params.slug;\n  },\n  params: {\n    slug: String,\n  },\n  methods: {\n    resetFormErrors() {\n      this.success = null;\n      this.result = null;\n      this.errorMessage = '';\n    },\n    checkForm() {\n      this.resetFormErrors();\n      let passed = true;\n      if (!this.title) {\n        this.titleInvalid = true;\n        this.errorMessage = 'Please enter a title.';\n        passed = false;\n      } else if (!this.slug) {\n        this.slugInvalid = true;\n        this.errorMessage = 'Please enter a slug.';\n        passed = false;\n      } else if (!this.parentSlug) {\n        this.parentIdInvalid = true;\n        this.errorMessage = 'Please eselect a parent category.';\n        passed = false;\n      }\n      return passed;\n    },\n    async submitForm() {\n      this.resetFormErrors();\n      if (this.checkForm() === true) {\n        this.buttonDisabled = true;\n        this.$http({\n          method: 'POST',\n          url: '/categories',\n          data: {\n            title: this.title,\n            slug: this.slug,\n            desc: this.desc,\n            parentSlug: this.parentSlug,\n          },\n        })\n          .then((result) => {\n            if (result.data) {\n              this.success = true;\n              this.result = result.data;\n            }\n          })\n          .catch((error) => {\n            this.$store.dispatch('setError', error);\n          })\n          .finally(() => {\n            this.buttonDisabled = false;\n          });\n      } else {\n        this.$store.dispatch('setError', {\n          message: this.errorMessage,\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n*[readonly] {\n        cursor: not-allowed;\n\n}\n\n.success {\n  border: 8px solid green;\n  background-color:honeydew;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}