{"ast":null,"code":"import { UserIcon } from '@zhuowenli/vue-feather-icons';\nimport { mapGetters } from 'vuex';\nimport localStorageService from '@/services/localStorageService';\nexport default {\n  components: {\n    UserIcon\n  },\n\n  data() {\n    return {\n      theme: 'light',\n      tokens: null\n    };\n  },\n\n  computed: { ...mapGetters(['isLoggedIn', 'accessTokenExpires', 'refreshTokenExpires'])\n  },\n\n  mounted() {\n    const theme = localStorageService.get('data-theme');\n    this.theme = theme !== 'dark' ? 'light' : 'dark';\n    document.documentElement.setAttribute('data-theme', this.theme);\n  },\n\n  methods: {\n    toggleTheme() {\n      this.theme = this.theme === 'light' ? 'dark' : 'light';\n      document.documentElement.setAttribute('data-theme', this.theme);\n      localStorage.setItem('data-theme', this.theme);\n    },\n\n    logout() {\n      this.$http({\n        method: 'POST',\n        url: '/auth/logout',\n        data: {\n          refreshTokenValue: this.$store.getters.refreshTokenValue\n        }\n      }).then(result => {\n        if (result.data) {\n          this.loggedin = false;\n        }\n      }).catch(error => {\n        this.$store.dispatch('setError', error);\n      }).finally(() => {\n        localStorage.clear();\n        this.$store.dispatch('logout');\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqCA,SAASA,QAAT,QAAyB,8BAAzB;AACA,SAASC,UAAT,QAA2B,MAA3B;AACA,OAAOC,mBAAP,MAAgC,gCAAhC;AAEA,eAAe;AACbC,YAAU,EAAE;AACVH;AADU,GADC;;AAIbI,MAAI,GAAG;AACL,WAAO;AACLC,WAAK,EAAE,OADF;AAELC,YAAM,EAAE;AAFH,KAAP;AAID,GATY;;AAUbC,UAAQ,EAAE,EACR,GAAGN,UAAU,CAAC,CAAC,YAAD,EAAe,oBAAf,EAAqC,qBAArC,CAAD;AADL,GAVG;;AAabO,SAAO,GAAG;AACR,UAAMH,KAAI,GAAIH,mBAAmB,CAACO,GAApB,CAAwB,YAAxB,CAAd;AACA,SAAKJ,KAAL,GAAaA,KAAI,KAAM,MAAV,GAAmB,OAAnB,GAA6B,MAA1C;AACAK,YAAQ,CAACC,eAAT,CAAyBC,YAAzB,CAAsC,YAAtC,EAAoD,KAAKP,KAAzD;AACD,GAjBY;;AAkBbQ,SAAO,EAAE;AACPC,eAAW,GAAG;AACZ,WAAKT,KAAL,GAAa,KAAKA,KAAL,KAAe,OAAf,GAAyB,MAAzB,GAAkC,OAA/C;AACAK,cAAQ,CAACC,eAAT,CAAyBC,YAAzB,CAAsC,YAAtC,EAAoD,KAAKP,KAAzD;AACAU,kBAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,KAAKX,KAAxC;AACD,KALM;;AAMPY,UAAM,GAAG;AACP,WAAKC,KAAL,CAAW;AACTC,cAAM,EAAE,MADC;AAETC,WAAG,EAAE,cAFI;AAGThB,YAAI,EAAE;AACJiB,2BAAiB,EAAE,KAAKC,MAAL,CAAYC,OAAZ,CAAoBF;AADnC;AAHG,OAAX,EAOGG,IAPH,CAOSC,MAAD,IAAY;AAChB,YAAIA,MAAM,CAACrB,IAAX,EAAiB;AACf,eAAKsB,QAAL,GAAgB,KAAhB;AACF;AACD,OAXH,EAYGC,KAZH,CAYUC,KAAD,IAAW;AAChB,aAAKN,MAAL,CAAYO,QAAZ,CAAqB,UAArB,EAAiCD,KAAjC;AACD,OAdH,EAeGE,OAfH,CAeW,MAAM;AACbf,oBAAY,CAACgB,KAAb;AACA,aAAKT,MAAL,CAAYO,QAAZ,CAAqB,QAArB;AACD,OAlBH;AAmBD;;AA1BM;AAlBI,CAAf","names":["UserIcon","mapGetters","localStorageService","components","data","theme","tokens","computed","mounted","get","document","documentElement","setAttribute","methods","toggleTheme","localStorage","setItem","logout","$http","method","url","refreshTokenValue","$store","getters","then","result","loggedin","catch","error","dispatch","finally","clear"],"sourceRoot":"","sources":["/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/src/components/layout/TheHeader.vue"],"sourcesContent":["<template>\n  <header>\n    <article>\n      <nav>\n        <ul>\n          <li>\n            <router-link to=\"/\"> Articl.net<br>\n             accessTokenExpires:{{accessTokenExpires}} {{new Date(accessTokenExpires)}}<br>\n             refreshTokenExpires:{{refreshTokenExpires}} {{new Date(refreshTokenExpires)}}<br>\n             isLoggedIn:{{isLoggedIn}}\n             </router-link>\n          </li>\n        </ul>\n        <ul class=\"right\">\n          <li v-if=\"!isLoggedIn\">\n            <router-link to=\"/login\" class=\"nav-user\"> login </router-link>\n\n            <router-link to=\"/register\" class=\"nav-user\">\n              create account\n            </router-link>\n          </li>\n          <li v-else>\n            <a href=\"#\" @click.prevent=\"logout\" class=\"nav-user\"> logout </a>\n          </li>\n          <li><router-link to=\"/categories\" class=\"nav-user\"> new category </router-link></li>\n          <li>\n            <router-link to=\"/users/me\">\n              <user-icon size=\"1.5x\"></user-icon>\n            </router-link>\n          </li>\n        </ul>\n      </nav>\n    </article>\n  </header>\n</template>\n\n<script>\nimport { UserIcon } from '@zhuowenli/vue-feather-icons';\nimport { mapGetters } from 'vuex';\nimport localStorageService from '@/services/localStorageService';\n\nexport default {\n  components: {\n    UserIcon,\n  },\n  data() {\n    return {\n      theme: 'light',\n      tokens: null,\n    };\n  },\n  computed: {\n    ...mapGetters(['isLoggedIn', 'accessTokenExpires', 'refreshTokenExpires']),\n  },\n  mounted() {\n    const theme = localStorageService.get('data-theme');\n    this.theme = theme !== 'dark' ? 'light' : 'dark';\n    document.documentElement.setAttribute('data-theme', this.theme);\n  },\n  methods: {\n    toggleTheme() {\n      this.theme = this.theme === 'light' ? 'dark' : 'light';\n      document.documentElement.setAttribute('data-theme', this.theme);\n      localStorage.setItem('data-theme', this.theme);\n    },\n    logout() {\n      this.$http({\n        method: 'POST',\n        url: '/auth/logout',\n        data: {\n          refreshTokenValue: this.$store.getters.refreshTokenValue,\n        },\n      })\n        .then((result) => {\n          if (result.data) {\n            this.loggedin = false;\n          }\n        })\n        .catch((error) => {\n          this.$store.dispatch('setError', error);\n        })\n        .finally(() => {\n          localStorage.clear();\n          this.$store.dispatch('logout');\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\narticl nav {\n  overflow: auto;\n}\n.nav-user a {\n  width: 5rem;\n}\n.nav-user {\n  margin: 0 1rem;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}