{"ast":null,"code":"import TheButtonToggleHidden from '@/components/ui/TheButtonToggleHidden.vue';\nimport CardNotification from '@/components/ui/CardNotification.vue';\nexport default {\n  name: 'RegisterPage',\n  components: {\n    TheButtonToggleHidden,\n    CardNotification\n  },\n\n  data() {\n    return {\n      email: null,\n      emailInvalid: null,\n      password: null,\n      passwordInvalid: null,\n      showPassword: false,\n      password2: null,\n      passwordInvalid2: null,\n      showPassword2: false,\n      buttonDisabled: false,\n      passwordMismatch: false,\n      passwordComplexity: 0,\n      errorMessage: '',\n      success: false,\n      result: null,\n      chrs: 0\n    };\n  },\n\n  watch: {\n    password: {\n      handler(val) {\n        this.passwordComplexity = this.scoreChars(val);\n      }\n\n    }\n  },\n  methods: {\n    charCounts(val) {\n      return {\n        numUpper: val.length - val.replace(/[A-Z]/g, '').length,\n        numLower: val.length - val.replace(/[a-z]/g, '').length,\n        numDigit: val.length - val.replace(/[0-9]/g, '').length,\n        numSpecial: val.length - val.replace(/\\W|_/g, '').length\n      };\n    },\n\n    scoreChars(val) {\n      if (!val) {\n        return 0;\n      }\n\n      const chars = this.charCounts(val);\n      const a = chars.numUpper > 0 ? 1 : 0;\n      const b = chars.numLower > 0 ? 1 : 0;\n      const c = chars.numDigit > 0 ? 1 : 0;\n      const d = chars.numSpecial > 0 ? 1 : 0;\n      return a + b + c + d;\n    },\n\n    resetFormErrors() {\n      this.emailInvalid = false;\n      this.passwordInvalid = false;\n      this.passwordMismatch = false;\n      this.success = null;\n      this.result = null;\n      this.errorMessage = '';\n    },\n\n    checkForm() {\n      this.resetFormErrors();\n      let passed = true;\n\n      if (!this.validateEmail(this.email)) {\n        this.emailInvalid = true;\n        this.errorMessage = 'Please enter a valid email.';\n        passed = false;\n      } else if (this.scoreChars(this.password) < 3) {\n        this.passwordInvalid = true;\n        this.errorMessage = 'Please choose a more complex password.';\n        passed = false;\n      } else if (this.password && this.password.length < 8) {\n        this.passwordInvalid = true;\n        this.errorMessage = 'Please choose a longer password.';\n        passed = false;\n      } else if (this.password !== this.password2) {\n        this.passwordMismatch = true;\n        this.errorMessage = 'The password fields must match.';\n        passed = false;\n      }\n\n      return passed;\n    },\n\n    validateEmail(email) {\n      if (!email) {\n        return false;\n      }\n\n      return email.match( // eslint-disable-next-line\n      /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n    },\n\n    async submitForm() {\n      this.resetFormErrors();\n\n      if (this.checkForm() === true) {\n        this.buttonDisabled = true;\n        this.$http({\n          method: 'POST',\n          url: '/auth/register',\n          data: {\n            nameFirst: this.nameFirst,\n            nameLast: this.nameLast,\n            password: this.password,\n            email: this.email\n          }\n        }).then(result => {\n          if (result.data) {\n            this.success = true;\n            this.result = result.data;\n          }\n        }).catch(error => {\n          this.$store.dispatch('setError', error);\n        }).finally(() => {\n          this.buttonDisabled = false;\n        });\n      } else {\n        this.$store.dispatch('setError', {\n          message: this.errorMessage\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["TheButtonToggleHidden","CardNotification","name","components","data","email","emailInvalid","password","passwordInvalid","showPassword","password2","passwordInvalid2","showPassword2","buttonDisabled","passwordMismatch","passwordComplexity","errorMessage","success","result","chrs","watch","handler","val","scoreChars","methods","charCounts","numUpper","length","replace","numLower","numDigit","numSpecial","chars","a","b","c","d","resetFormErrors","checkForm","passed","validateEmail","match","submitForm","$http","method","url","nameFirst","nameLast","then","catch","error","$store","dispatch","finally","message"],"sourceRoot":"","sources":["/Users/erikmattheis/Dropbox/articl/heroku/src/frontend/src/pages/register.vue"],"sourcesContent":["<template>\n  <article>\n    <h1 v-if=\"!success\">Create account</h1>\n    <h1 v-else>Account created</h1>\n    <form v-if=\"!success\">\n      <label for=\"email\">Email</label>\n      <input\n        v-model=\"email\"\n        type=\"text\"\n        name=\"email\"\n        id=\"email\"\n        autocomplete=\"email\"\n      />\n      <label for=\"password\">Password\n        <small class=\"lighter left-space\" v-if=\"passwordComplexity < 3\">\n          Please use uppercase and lowercase letters,\n        digits and special characters.</small>\n      <small class=\"lighter left-space\" v-else-if=\"password.length < 8\">\n        Please use 8 or more characters.\n        </small>\n      </label>\n      <div class=\"toggle-password\">\n        <input\n          v-if=\"showPassword\"\n          v-model=\"password\"\n          type=\"text\"\n          name=\"password\"\n          id=\"password\"\n          autocomplete=\"new-password\"\n        />\n        <input\n          v-if=\"!showPassword\"\n          v-model=\"password\"\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n          autocomplete=\"new-password\"\n        />\n        <the-button-toggle-hidden\n          class=\"togglePasswordMask\"\n          @show=\"showPassword = !showPassword\"\n        ></the-button-toggle-hidden>\n      </div>\n      <label for=\"password2\">Confirm Password</label>\n      <div class=\"toggle-password\">\n        <input\n          v-if=\"showPassword2\"\n          v-model=\"password2\"\n          type=\"text\"\n          name=\"password2\"\n          id=\"password2\"\n          autocomplete=\"new-password\"\n        />\n        <input\n          v-if=\"!showPassword2\"\n          v-model=\"password2\"\n          type=\"password\"\n          name=\"password2\"\n          id=\"password2\"\n          autocomplete=\"new-password\"\n        />\n        <the-button-toggle-hidden\n          class=\"togglePasswordMask\"\n          @show=\"showPassword2 = !showPassword2\"\n        ></the-button-toggle-hidden>\n      </div>\n      <div v-if=\"passwordInvalid\"></div>\n      <button\n        type=\"submit\"\n        id=\"Login\"\n        :aria-busy=\"buttonDisabled\"\n        @click.prevent=\"submitForm()\"\n      >\n        <span v-if=\"!buttonDisabled\">Create Account</span>\n      </button>\n    </form>\n    <card-notification v-else success-message=\"Congradulations! Please check\n    your email to verify your email address\"></card-notification>\n  </article>\n</template>\n\n<script>\nimport TheButtonToggleHidden from '@/components/ui/TheButtonToggleHidden.vue';\nimport CardNotification from '@/components/ui/CardNotification.vue';\n\nexport default {\n  name: 'RegisterPage',\n  components: {\n    TheButtonToggleHidden,\n    CardNotification,\n  },\n  data() {\n    return {\n      email: null,\n      emailInvalid: null,\n      password: null,\n      passwordInvalid: null,\n      showPassword: false,\n      password2: null,\n      passwordInvalid2: null,\n      showPassword2: false,\n      buttonDisabled: false,\n      passwordMismatch: false,\n      passwordComplexity: 0,\n      errorMessage: '',\n      success: false,\n      result: null,\n      chrs: 0,\n    };\n  },\n  watch: {\n    password: {\n      handler(val) {\n        this.passwordComplexity = this.scoreChars(val);\n      },\n    },\n  },\n  methods: {\n    charCounts(val) {\n      return {\n        numUpper: val.length - val.replace(/[A-Z]/g, '').length,\n        numLower: val.length - val.replace(/[a-z]/g, '').length,\n        numDigit: val.length - val.replace(/[0-9]/g, '').length,\n        numSpecial: val.length - val.replace(/\\W|_/g, '').length,\n      };\n    },\n    scoreChars(val) {\n      if (!val) {\n        return 0;\n      }\n      const chars = this.charCounts(val);\n      const a = chars.numUpper > 0 ? 1 : 0;\n      const b = chars.numLower > 0 ? 1 : 0;\n      const c = chars.numDigit > 0 ? 1 : 0;\n      const d = chars.numSpecial > 0 ? 1 : 0;\n      return a + b + c + d;\n    },\n    resetFormErrors() {\n      this.emailInvalid = false;\n      this.passwordInvalid = false;\n      this.passwordMismatch = false;\n      this.success = null;\n      this.result = null;\n      this.errorMessage = '';\n    },\n    checkForm() {\n      this.resetFormErrors();\n      let passed = true;\n      if (!this.validateEmail(this.email)) {\n        this.emailInvalid = true;\n        this.errorMessage = 'Please enter a valid email.';\n        passed = false;\n      } else if (this.scoreChars(this.password) < 3) {\n        this.passwordInvalid = true;\n        this.errorMessage = 'Please choose a more complex password.';\n        passed = false;\n      } else if (this.password && this.password.length < 8) {\n        this.passwordInvalid = true;\n        this.errorMessage = 'Please choose a longer password.';\n        passed = false;\n      } else if (this.password !== this.password2) {\n        this.passwordMismatch = true;\n        this.errorMessage = 'The password fields must match.';\n        passed = false;\n      }\n      return passed;\n    },\n    validateEmail(email) {\n      if (!email) {\n        return false;\n      }\n      return email.match(\n        // eslint-disable-next-line\n        /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n    },\n    async submitForm() {\n      this.resetFormErrors();\n      if (this.checkForm() === true) {\n        this.buttonDisabled = true;\n        this.$http({\n          method: 'POST',\n          url: '/auth/register',\n          data: {\n            nameFirst: this.nameFirst,\n            nameLast: this.nameLast,\n            password: this.password,\n            email: this.email,\n          },\n        })\n          .then((result) => {\n            if (result.data) {\n              this.success = true;\n              this.result = result.data;\n            }\n          })\n          .catch((error) => {\n            this.$store.dispatch('setError', error);\n          })\n          .finally(() => {\n            this.buttonDisabled = false;\n          });\n      } else {\n        this.$store.dispatch('setError', {\n          message: this.errorMessage,\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.toggle-password {\n  position: relative;\n}\n\n.togglePasswordMask {\n  position: absolute;\n  right: 1rem;\n  top: 40%;\n  transform: translateY(-40%);\n  cursor: pointer;\n  height: 2.2rem;\n  width: 2.2rem;\n};\n\n.success {\n  border: 8px solid green;\n  background-color:honeydew;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}